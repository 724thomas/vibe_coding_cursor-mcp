name: PR Auto Comment

on:
  pull_request:
    types: [opened, synchronize]

permissions:
  contents: read
  pull-requests: write
  issues: write

jobs:
  comment:
    runs-on: ubuntu-latest
    steps:
    - name: PR Comment
      uses: actions/github-script@v6
      with:
        script: |
          const { data: pullRequest } = await github.rest.pulls.get({
            owner: context.repo.owner,
            repo: context.repo.repo,
            pull_number: context.issue.number,
          });

          const body = `
          ## ğŸ‰ PRì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!

          **ì‘ì„±ì**: @${pullRequest.user.login}
          **ë¸Œëœì¹˜**: \`${pullRequest.head.ref}\` â†’ \`${pullRequest.base.ref}\`
          **ë³€ê²½ëœ íŒŒì¼ ìˆ˜**: ${pullRequest.changed_files}ê°œ
          **ì¶”ê°€ëœ ë¼ì¸**: +${pullRequest.additions}
          **ì‚­ì œëœ ë¼ì¸**: -${pullRequest.deletions}

          ### ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸
          - [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í–ˆë‚˜ìš”?
          - [ ] ì½”ë“œ ë¦¬ë·°ë¥¼ ìš”ì²­í–ˆë‚˜ìš”?
          - [ ] ê´€ë ¨ ì´ìŠˆê°€ ìˆë‹¤ë©´ ì—°ê²°í–ˆë‚˜ìš”?
          - [ ] ë¬¸ì„œê°€ ì—…ë°ì´íŠ¸ ë˜ì—ˆë‚˜ìš”?

          ### ğŸ” ìë™ ê²€ì‚¬ ìƒíƒœ
          - í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘... â³
          - ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ ì¤‘... â³

          ---
          *ì´ ëŒ“ê¸€ì€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.*
          `;

          github.rest.issues.createComment({
            issue_number: context.issue.number,
            owner: context.repo.owner,
            repo: context.repo.repo,
            body: body
          }); 